<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>VortexPWM v1.7</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%230e0f12' width='100' height='100'/><path d='M10 50 L30 20 L50 80 L70 35 L90 65' stroke='%236ea8fe' stroke-width='4' fill='none' stroke-linecap='round' stroke-linejoin='round'/></svg>"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="split">
      <h1>VortexPWM v1.7</h1>
      <div class="bar">
        <button id="start">Start Audio</button>
        <span class="pill small">Stereo • 8-Voice Polyphonic</span>
        <span
          class="pill small"
          id="voiceCount"
          title="Active voices / Total voices"
        >
          Voices: <span id="voiceCountValue">0</span>/8
        </span>
      </div>
    </header>

    <main>
      <section class="row">
        <fieldset>
          <legend>Oscillator 1 (PWM)</legend>
          <slider-control>
            <label class="label" for="coarse">Coarse (st)</label>
            <input
              class="slider"
              id="coarse"
              type="range"
              min="-48"
              max="48"
              step="1"
              value="0"
            />
            <span class="value" id="coarseVal">0</span>
          </slider-control>
          <slider-control>
            <label class="label" for="fine">Fine (cents)</label>
            <input
              class="slider"
              id="fine"
              type="range"
              min="-50"
              max="50"
              step="1"
              value="0"
            />
            <span class="value" id="fineVal">0</span>
          </slider-control>
          <slider-control>
            <label class="label" for="pulseWidth">PW (%)</label>
            <input
              class="slider"
              id="pulseWidth"
              type="range"
              min="0.01"
              max="0.99"
              step="0.01"
              value="0.5"
            />
            <span class="value" id="pulseWidthVal">50</span>
          </slider-control>
          <slider-control>
            <label class="label" for="pwmDepth">PW Depth (%)</label>
            <input
              class="slider"
              id="pwmDepth"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0.5"
            />
            <span class="value" id="pwmDepthVal">50</span>
          </slider-control>
          <slider-control>
            <label class="label" for="pwmRate">PW Rate (Hz)</label>
            <input
              class="slider"
              id="pwmRate"
              type="range"
              min="0.1"
              max="10"
              step="0.01"
              value="2"
            />
            <span class="value" id="pwmRateVal">2.00</span>
          </slider-control>
          <slider-control>
            <label class="label" for="fmDepth">FM Depth (%)</label>
            <input
              class="slider"
              id="fmDepth"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0"
            />
            <span class="value" id="fmDepthVal">0</span>
          </slider-control>
        </fieldset>

        <fieldset>
          <legend>Oscillator 2</legend>
          <slider-control>
            <label class="label" for="osc2Waveform">Waveform</label>
            <select class="slider" id="osc2Waveform">
              <option value="0">Saw</option>
              <option value="1">Triangle</option>
              <option value="2">Sine</option>
              <option value="3">Square</option>
            </select>
            <span class="value" id="osc2WaveformVal">Saw</span>
          </slider-control>
          <slider-control>
            <label class="label" for="osc2Coarse">Coarse (st)</label>
            <input
              class="slider"
              id="osc2Coarse"
              type="range"
              min="-48"
              max="48"
              step="1"
              value="0"
            />
            <span class="value" id="osc2CoarseVal">0</span>
          </slider-control>
          <slider-control>
            <label class="label" for="osc2Fine">Fine (cents)</label>
            <input
              class="slider"
              id="osc2Fine"
              type="range"
              min="-50"
              max="50"
              step="1"
              value="0"
            />
            <span class="value" id="osc2FineVal">0</span>
          </slider-control>
          <slider-control>
            <label class="label" for="hardSync">Hard Sync</label>
            <input
              class="slider"
              id="hardSync"
              type="range"
              min="0"
              max="1"
              step="1"
              value="0"
            />
            <span class="value" id="hardSyncVal">Off</span>
          </slider-control>
        </fieldset>

        <fieldset>
          <legend>Mixer</legend>
          <slider-control>
            <label class="label" for="oscVolume">Osc1 Vol. (%)</label>
            <input
              class="slider"
              id="oscVolume"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="1"
            />
            <span class="value" id="oscVolumeVal">100</span>
          </slider-control>
          <slider-control>
            <label class="label" for="subVolume">Sub1 Vol. (%)</label>
            <input
              class="slider"
              id="subVolume"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0"
            />
            <span class="value" id="subVolumeVal">0</span>
          </slider-control>
          <slider-control>
            <label class="label" for="osc2Volume">Osc2 Vol. (%)</label>
            <input
              class="slider"
              id="osc2Volume"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0"
            />
            <span class="value" id="osc2VolumeVal">0</span>
          </slider-control>
          <slider-control>
            <label class="label" for="sub2Volume">Sub2 Vol. (%)</label>
            <input
              class="slider"
              id="sub2Volume"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0"
            />
            <span class="value" id="sub2VolumeVal">0</span>
          </slider-control>
          <slider-control>
            <label class="label" for="ringVolume">Ring Vol. (%)</label>
            <input
              class="slider"
              id="ringVolume"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0"
            />
            <span class="value" id="ringVolumeVal">0</span>
          </slider-control>
          <slider-control>
            <label class="label" for="noiseVolume">Noise Vol. (%)</label>
            <input
              class="slider"
              id="noiseVolume"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0"
            />
            <span class="value" id="noiseVolumeVal">0</span>
          </slider-control>
        </fieldset>

        <fieldset>
          <legend>Filters</legend>
          <slider-control>
            <label class="label" for="filterCutoff">LP Cutoff (Hz)</label>
            <input
              class="slider"
              id="filterCutoff"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0.25"
            />
            <span class="value" id="filterCutoffVal">5000</span>
          </slider-control>
          <slider-control>
            <label class="label" for="filterResonance">LP Res. (%)</label>
            <input
              class="slider"
              id="filterResonance"
              type="range"
              min="0"
              max="0.95"
              step="0.01"
              value="0.1"
            />
            <span class="value" id="filterResonanceVal">10</span>
          </slider-control>
          <slider-control>
            <label class="label" for="hpfCutoff">HP Cutoff (Hz)</label>
            <input
              class="slider"
              id="hpfCutoff"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0"
            />
            <span class="value" id="hpfCutoffVal">20</span>
          </slider-control>
          <slider-control>
            <label class="label" for="hpfResonance">HP Res. (%)</label>
            <input
              class="slider"
              id="hpfResonance"
              type="range"
              min="0"
              max="0.95"
              step="0.01"
              value="0.1"
            />
            <span class="value" id="hpfResonanceVal">10</span>
          </slider-control>
          <slider-control>
            <label class="label" for="bpm">BPM</label>
            <input
              class="slider"
              id="bpm"
              type="range"
              min="20"
              max="300"
              step="1"
              value="120"
            />
            <span class="value" id="bpmVal">120</span>
          </slider-control>
        </fieldset>

        <fieldset>
          <legend>Amplifier (ADSR + Master)</legend>
          <slider-control>
            <label class="label" for="attack">Attack (ms)</label>
            <input
              class="slider"
              id="attack"
              type="range"
              min="0"
              max="6"
              step="0.001"
              value="0.005"
            />
            <span class="value" id="attackVal">5</span>
          </slider-control>
          <slider-control>
            <label class="label" for="decay">Decay (ms)</label>
            <input
              class="slider"
              id="decay"
              type="range"
              min="0"
              max="6"
              step="0.001"
              value="0.1"
            />
            <span class="value" id="decayVal">100</span>
          </slider-control>
          <slider-control>
            <label class="label" for="sustain">Sustain (%)</label>
            <input
              class="slider"
              id="sustain"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0.7"
            />
            <span class="value" id="sustainVal">70</span>
          </slider-control>
          <slider-control>
            <label class="label" for="release">Release (ms)</label>
            <input
              class="slider"
              id="release"
              type="range"
              min="0"
              max="6"
              step="0.001"
              value="0.2"
            />
            <span class="value" id="releaseVal">200</span>
          </slider-control>
          <slider-control>
            <label class="label" for="velocityAmt">Vel. Amt. (%)</label>
            <input
              class="slider"
              id="velocityAmt"
              type="range"
              min="0"
              max="1"
              step="0.01"
              value="0.5"
            />
            <span class="value" id="velocityAmtVal">50</span>
          </slider-control>
          <slider-control>
            <label class="label" for="master">Master Vol. (%)</label>
            <input
              class="slider"
              id="master"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0.4"
            />
            <span class="value" id="masterVal">0.400</span>
          </slider-control>
        </fieldset>

        <fieldset>
          <legend>Filter Env (ADSR)</legend>
          <slider-control>
            <label class="label" for="filterAttack">Attack (ms)</label>
            <input
              class="slider"
              id="filterAttack"
              type="range"
              min="0"
              max="6"
              step="0.001"
              value="0.005"
            />
            <span class="value" id="filterAttackVal">5</span>
          </slider-control>
          <slider-control>
            <label class="label" for="filterDecay">Decay (ms)</label>
            <input
              class="slider"
              id="filterDecay"
              type="range"
              min="0"
              max="6"
              step="0.001"
              value="0.1"
            />
            <span class="value" id="filterDecayVal">100</span>
          </slider-control>
          <slider-control>
            <label class="label" for="filterSustain">Sustain (%)</label>
            <input
              class="slider"
              id="filterSustain"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0.7"
            />
            <span class="value" id="filterSustainVal">70</span>
          </slider-control>
          <slider-control>
            <label class="label" for="filterRelease">Release (ms)</label>
            <input
              class="slider"
              id="filterRelease"
              type="range"
              min="0"
              max="6"
              step="0.001"
              value="0.2"
            />
            <span class="value" id="filterReleaseVal">200</span>
          </slider-control>
          <slider-control>
            <label class="label" for="lpEnvAmount">LP Env A. (%)</label>
            <input
              class="slider"
              id="lpEnvAmount"
              type="range"
              min="-100"
              max="100"
              step="1"
              value="0"
            />
            <span class="value" id="lpEnvAmountVal">0</span>
          </slider-control>
          <slider-control>
            <label class="label" for="hpEnvAmount">HP Env A. (%)</label>
            <input
              class="slider"
              id="hpEnvAmount"
              type="range"
              min="-100"
              max="100"
              step="1"
              value="0"
            />
            <span class="value" id="hpEnvAmountVal">0</span>
          </slider-control>
        </fieldset>
      </section>

      <section>
        <fieldset class="three-column">
          <legend>Auto Pan</legend>
          <slider-control>
            <label class="label" for="panPos">Pan Position</label>
            <input
              class="slider"
              id="panPos"
              type="range"
              min="-1"
              max="1"
              step="0.01"
              value="0"
            />
            <span class="value" id="panPosVal">C</span>
          </slider-control>
          <slider-control>
            <label class="label" for="panDepth">Pan Depth (%)</label>
            <input
              class="slider"
              id="panDepth"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0"
            />
            <span class="value" id="panDepthVal">0</span>
          </slider-control>
          <slider-control>
            <label class="label" for="panRate">Pan Rate (Hz)</label>
            <input
              class="slider"
              id="panRate"
              type="range"
              min="0.1"
              max="10"
              step="0.01"
              value="0.5"
            />
            <span class="value" id="panRateVal">0.50</span>
          </slider-control>
        </fieldset>
      </section>

      <section>
        <fieldset>
          <legend>LFO1 (Per-Voice)</legend>
          <slider-control>
            <label class="label" for="lfo1Rate">Rate (Hz)</label>
            <input
              class="slider"
              id="lfo1Rate"
              type="range"
              min="0.01"
              max="50"
              step="0.01"
              value="2"
            />
            <span class="value" id="lfo1RateVal">2.00</span>
          </slider-control>
          <slider-control>
            <label class="label" for="lfo1Depth">Depth (%)</label>
            <input
              class="slider"
              id="lfo1Depth"
              type="range"
              min="0"
              max="1"
              step="0.001"
              value="0"
            />
            <span class="value" id="lfo1DepthVal">0</span>
          </slider-control>
          <slider-control>
            <label class="label" for="lfo1Waveform">Waveform</label>
            <select class="slider" id="lfo1Waveform">
              <option value="0">Sine</option>
              <option value="1">Triangle</option>
              <option value="2">Square</option>
              <option value="3">Saw Up</option>
              <option value="4">Saw Down</option>
              <option value="5">S&H</option>
            </select>
            <span class="value" id="lfo1WaveformVal">Sine</span>
          </slider-control>
          <slider-control>
            <label class="label" for="lfo1Phase">Phase (°)</label>
            <input
              class="slider"
              id="lfo1Phase"
              type="range"
              min="0"
              max="360"
              step="1"
              value="0"
            />
            <span class="value" id="lfo1PhaseVal">0°</span>
          </slider-control>
          <slider-control>
            <label class="label" for="lfo1TempoSync">Tempo Sync</label>
            <input
              class="slider"
              id="lfo1TempoSync"
              type="range"
              min="0"
              max="1"
              step="1"
              value="0"
            />
            <span class="value" id="lfo1TempoSyncVal">Off</span>
          </slider-control>
          <slider-control>
            <label class="label" for="lfo1SyncDivision">Sync Division</label>
            <select class="slider" id="lfo1SyncDivision">
              <option value="0">1/1</option>
              <option value="1">1/2</option>
              <option value="2">1/2D</option>
              <option value="3">1/2T</option>
              <option value="4" selected>1/4</option>
              <option value="5">1/4D</option>
              <option value="6">1/4T</option>
              <option value="7">1/8</option>
              <option value="8">1/8D</option>
              <option value="9">1/8T</option>
              <option value="10">1/16</option>
              <option value="11">1/16D</option>
              <option value="12">1/16T</option>
              <option value="13">1/32</option>
            </select>
            <span class="value" id="lfo1SyncDivisionVal">1/4</span>
          </slider-control>
          <slider-control>
            <label class="label" for="lfo1Retrigger">Retrigger</label>
            <input
              class="slider"
              id="lfo1Retrigger"
              type="range"
              min="0"
              max="1"
              step="1"
              value="1"
            />
            <span class="value" id="lfo1RetriggerVal">Key</span>
          </slider-control>
          <slider-control>
            <label class="label" for="lfo1FadeIn">Fade-in</label>
            <input
              class="slider"
              id="lfo1FadeIn"
              type="range"
              min="0"
              max="5"
              step="0.01"
              value="0"
            />
            <span class="value" id="lfo1FadeInVal">0ms</span>
          </slider-control>
        </fieldset>
      </section>

      <section>
        <fieldset>
          <legend>FX Chain (Drag & Drop)</legend>
          <div class="fx-section">
            <div class="fx-library-container">
              <h3>Available Effects</h3>
              <div id="fx-library" class="fx-library"></div>
            </div>
            <div class="fx-chain-container">
              <h3>Active Chain (drag to reorder)</h3>
              <div id="fx-chain" class="fx-chain"></div>
              <div class="fx-empty-state small">
                Drag effects from the left to add them to the chain
              </div>
            </div>
          </div>
        </fieldset>
      </section>

      <section class="two-column">
        <fieldset>
          <legend>MIDI</legend>
          <div>
            <div id="midiStatus" class="small mb-8">
              Checking for MIDI devices...
            </div>
            <div id="midiDevices"></div>
            <div id="midiActivity" class="small mt-8 tabular-nums">
              Last note: -
            </div>
          </div>
          <div>
            <slider-control>
              <label class="label" for="pitchBendRange">Pitch Bend (st)</label>
              <input
                class="slider"
                id="pitchBendRange"
                type="range"
                min="0"
                max="24"
                step="1"
                value="2"
              />
              <span class="value" id="pitchBendRangeVal">±2</span>
            </slider-control>
            <slider-control>
              <label class="label" for="velocityCurve">Velocity Curve</label>
              <input
                class="slider"
                id="velocityCurve"
                type="range"
                min="-100"
                max="100"
                step="1"
                value="0"
              />
              <span class="value" id="velocityCurveVal">Lin</span>
            </slider-control>
          </div>
          <div class="midi-mapping" id="midiMapping">
            <div class="midi-mapping-header">
              <h4>CC Mapping</h4>
              <button id="midiMappingReset" class="pill small" type="button">
                Reset Defaults
              </button>
            </div>
            <div id="midiMappingList" class="midi-mapping-list"></div>
            <div id="midiLearnStatus" class="small midi-learn-status">
              MIDI learn inactive
            </div>
          </div>
        </fieldset>

        <fieldset>
          <legend>Aftertouch Modulation</legend>
          <!-- Slot 1 -->
          <slider-control>
            <label class="label" for="atDest1">Slot 1 Dest</label>
            <input
              class="slider"
              id="atDest1"
              type="range"
              min="0"
              max="17"
              step="1"
              value="0"
            />
            <span class="value" id="atDest1Val">None</span>
          </slider-control>
          <slider-control>
            <label class="label" for="atAmount1">Slot 1 Amount</label>
            <input
              class="slider"
              id="atAmount1"
              type="range"
              min="-1"
              max="1"
              step="0.01"
              value="0"
            />
            <span class="value" id="atAmount1Val">0.00</span>
          </slider-control>

          <!-- Slot 2 -->
          <slider-control>
            <label class="label" for="atDest2">Slot 2 Dest</label>
            <input
              class="slider"
              id="atDest2"
              type="range"
              min="0"
              max="17"
              step="1"
              value="0"
            />
            <span class="value" id="atDest2Val">None</span>
          </slider-control>
          <slider-control>
            <label class="label" for="atAmount2">Slot 2 Amount</label>
            <input
              class="slider"
              id="atAmount2"
              type="range"
              min="-1"
              max="1"
              step="0.01"
              value="0"
            />
            <span class="value" id="atAmount2Val">0.00</span>
          </slider-control>

          <!-- Slot 3 -->
          <slider-control>
            <label class="label" for="atDest3">Slot 3 Dest</label>
            <input
              class="slider"
              id="atDest3"
              type="range"
              min="0"
              max="17"
              step="1"
              value="0"
            />
            <span class="value" id="atDest3Val">None</span>
          </slider-control>
          <slider-control>
            <label class="label" for="atAmount3">Slot 3 Amount</label>
            <input
              class="slider"
              id="atAmount3"
              type="range"
              min="-1"
              max="1"
              step="0.01"
              value="0"
            />
            <span class="value" id="atAmount3Val">0.00</span>
          </slider-control>

          <!-- Slot 4 -->
          <slider-control>
            <label class="label" for="atDest4">Slot 4 Dest</label>
            <input
              class="slider"
              id="atDest4"
              type="range"
              min="0"
              max="17"
              step="1"
              value="0"
            />
            <span class="value" id="atDest4Val">None</span>
          </slider-control>
          <slider-control>
            <label class="label" for="atAmount4">Slot 4 Amount</label>
            <input
              class="slider"
              id="atAmount4"
              type="range"
              min="-1"
              max="1"
              step="0.01"
              value="0"
            />
            <span class="value" id="atAmount4Val">0.00</span>
          </slider-control>
        </fieldset>
      </section>

      <section>
        <fieldset>
          <legend>Keyboard (5 octaves)</legend>
          <slider-control>
            <label class="label" for="velocity">Velocity</label>
            <input
              class="slider"
              id="velocity"
              type="range"
              min="0"
              max="1"
              step="0.01"
              value="0.9"
            />
            <span class="value" id="velocityVal">0.90</span>
          </slider-control>
          <div id="kbd"></div>
        </fieldset>
      </section>
    </main>

    <script type="module" src="./main.js"></script>
  </body>
</html>
